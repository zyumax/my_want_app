
<h1 class="display-4 text-primary">マイリスト</h1>

<div class="sum-price"> 
  <label>合計金額</label>
  <%= number_to_currency(@total_price, unit: "¥", precision: 0) %>
</div>

<div class="topper">
  <button id="btn">+新規作成</button>
  <% if user_signed_in? %>
    <p><%= link_to 'サインアウト', destroy_user_session_path, method: :delete %></p>
  <% end %>
</div>

<div class="container">
  <div class="row">
    <div id="evaluation_5">
      <% @products.each do |product| %> 
        <%= render '/products/products5', product: product %>
      <% end %>
    </div>
    <div id="evaluation_4">
      <% @products.each do |product| %>
        <%= render '/products/products4', product: product %>
      <% end %>
    </div>
    <div id="evaluation_3">
      <% @products.each do |product| %>
        <%= render '/products/products3', product: product %>
      <% end %>
    </div>
    <div id="evaluation_2">
      <% @products.each do |product| %>
        <%= render '/products/products2', product: product %>
      <% end %>
    </div>
    <div id="evaluation_1">
      <% @products.each do |product| %>
        <%= render '/products/products1', product: product %>
      <% end %>
    </div>
  </div>
</div>

<%# <p><%= link_to '予測画面(仮)', products_predict_path, class: "btn btn-success" %>


<div class="modal" id="modal-new">
  <h1 class="display-4 text-primary" id="mylist">マイリストに追加</h1>
      <%= form_with model: @product, url: products_path, method: :post, data: {remote: true} do |f| %>
        <div class="form-group"> 
          <label for="name" class="textbox">商品名</label>
          <%= f.text_field :name, class:"form-control"%>
        </div>
        <div class="form-group"> 
          <label for="price" class="textbox">金額</label>
          <%= f.number_field :price, min:0, class:"form-control"%>
        </div>
        <div class="form-group"> 
          <label for="note" class="textbox">メモ</label>
          <%= f.text_field :note, class:"form-control"%>
        </div>
        <div class="form-group"> 
          <%= f.hidden_field :evaluation, :value => "1" , class:"form-control", id:"sugie" %>
        </div>

        <div class="form-group" id="submit"> 
          <%= f.submit "登録", class: "btn btn-primary" %>
        </div> 

      <% end %>

      <div id="star-all" class="review-stars">
        <div id="star-1" class="true">
          ★
        </div>
        <div id="star-2" class="">
          ☆
        </div>
        <div id="star-3" class="">
          ☆
        </div>
        <div id="star-4" class="">
          ☆
        </div>
        <div id="star-5" class="">
          ☆
        </div>
      </div>
      <%= javascript_pack_tag 'new' %>
</div>

<div class="mask" id="mask"></div>



<script>
var btn = document.getElementById('btn')
var mask = document.getElementById('mask')
var modal = document.getElementById('modal-new')
var modal_edit = document.getElementById("#{product.id}")
var edit = document.getElementById('edit_#{product.id}')
btn.addEventListener('click', function() {
  modal.style.display = 'block';
  mask.style.display = 'block';
})
edit.addEventListener('click', function() {
  modal_edit.style.display = 'block';
  mask.style.display = 'block';
})
mask.addEventListener('click', function() {
  modal.style.display = 'none';
  mask.style.display = 'none';
})
</script>